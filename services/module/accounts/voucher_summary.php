<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml">    <head>        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />        <title>Voucher Summary | eAccount Book</title>           </head>    <body>		<div class="panel panel-default input_form_inner_content">            <div class="panel-heading">                <h3 class="panel-title page_title"><?=$reqPage['page_title']?>				<ol class="breadcrumb">					<li><?=$reqPage['module_title']?></li>					<li class="active"><a href="?module=<?=$reqPage['module_value']?>&page=<?=$reqPage['page_value']?>"><?=$reqPage['page_title']?></a></li>				</ol>				</h3>            </div>            <div class="panel-body">							                 <div class="input_field_content">				    	                    <div class="row">						<?php						    $userId   = $_SESSION['user_srl_id'];							$arr      = array();							$dt1      = date('Y-m-d');							$dt2      = date('Y-m-d');							if(isset($_POST['btnShowCrReport']))							{								$dt1  = $_POST['from_dt'];								$dt2  = $_POST['to_dt'];								$step = 1;								header("Location:?module=accounts&page=voucher_summary&from_dt=$dt1&to_dt=$dt2&step=$step");								exit;							}							if(isset($_GET['from_dt']) && isset($_GET['to_dt']))							{								$dt1    = $_GET['from_dt'];								$dt2    = $_GET['to_dt'];								$step   = $_GET['step'];							}														$fromDt = $dt1." 00:00:00";							$toDt   = $dt2." 23:59:00";														if($fromDt == '' || $toDt == '')							{								$_SESSION['userMsg'] = "Sorry, you have submitted blank field !";								$_SESSION['alert']   = "danger";								header("Location:?module=accounts&page=voucher_summary&from_dt=$dt1&to_dt=$dt2&step=$step");								exit;							}							if($fromDt > $toDt)							{								$_SESSION['userMsg'] = "Sorry, From-date cann't be greater than To-date !";								$_SESSION['alert']   = "danger";								//header("Location:?module=accounts&page=voucher_summary&from_dt=$dt1&to_dt=$dt2&step=$step");								//exit;							}							// start setting for pagination							$sl=1;							$step = $_GET['step']; 							$table = 'tbl_voucher_list';							$where = "user_id='$userId' AND voucher_dt BETWEEN '$fromDt' AND '$toDt' AND voucher_status=1";							$dataDisplay = 10;							$totalRows = 0; // its 0 when table name is pass							$pagination = getPagination($table,$where,$step,$dataDisplay,$totalRows);                     							$offset = $pagination['offset'];							$limit = $pagination['limit'];							if($step > 1)							{								$sl = 0;								$sl = ($step-1) * $dataDisplay + 1;							}							// end setting for pagination																						$sql = "SELECT * FROM `tbl_voucher_list` 							WHERE $where ORDER BY voucher_dt DESC LIMIT $offset, $limit";															//$arr = selectAllRows($sql);														/////////////////////////////////////////////////							if($_SESSION['userMsg'] != "" )							{							?>							<div class="row" style="padding:0px 15px">								<div class="alert alert-<?=$_SESSION['alert']?>">									<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>									<?php										echo "\t".$_SESSION['userMsg'];										$_SESSION['userMsg']='';									?>								</div>							</div>							<?php							}              						?>																		 <div class="row" style="padding:15px;">						    <div class="col-lg-12 rpt_filter" style="text-align:left">								<form method="post">								    <div class="row">									<div class="col-lg-3">From:<br/><input type="text"  name="from_dt" value="<?=($dt1 != '') ? $dt1 : date('Y-m-d')?>" class="tcal form-control"></div>									<div class="col-lg-3">To:<br/><input type="text"  name="to_dt" value="<?=($dt2 != '') ? $dt2 : date('Y-m-d')?>" class="tcal form-control"></div>									<div class="col-lg-2"><br/><input type="submit" name="btnShowCrReport" class="btn btn-primary" value="Show Report"></div>									</div>								</form>														</div>						 </div>						 <div class="row">							<div class="col-lg-12">								<div class="table-responsive">								<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">								<?php								$arr = selectAllRows($sql);								if(count($arr) > 0) 								{									foreach($arr as $row)									{									?>									  <div class="panel panel-default">										<div class="panel-heading" role="tab" id="heading<?=$row['id']?>">										  <h4 class="panel-title">											<?=$sl++?>.&nbsp;											<a role="button" data-toggle="collapse" data-parent="#accordion" href="#<?=$row['id']?>" aria-expanded="true" aria-controls="collapseOne">											  <?=$row['voucher_title']?>&nbsp;&nbsp;<span style="color:#0FA1DB">[<?=$row['voucher_dt']?>]</span>											</a>										  </h4>										</div>										<div id="<?=$row['id']?>" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading<?=$row['id']?>">										  <div class="panel-body">											<table class="table table-bordered">												<thead class="rpt_thead">													<tr style="text-align: center;">														<th style="width:20px;text-align:center">#</th>														<th style="width:120px;text-align:center">Head Type</th>														<th style="width:150px;text-align:center">Head Name</th>														<th style="width:150px;text-align:center">Cr/Dr Description</th>														<th style="width:80px;text-align:center">Date</th>														<th style="width:90px;text-align:center">Amount (Tk)</th>															</tr>												</thead>												<?php												$i=1;												$total=0;												$id = $row['id'];												$sql2="SELECT * FROM `tbl_voucher_details` where voucher_id=$id";												$arr2 = selectAllRows($sql2);												if (is_array($arr2)) 												{													foreach($arr2 as $row2)													{														if($row2['head_type']=='Cr')														{															$amount = sprintf("%.2f",$row2['amount']);															$itemAmount=$amount;															$total += $amount;														}														if($row2['head_type']=='Dr')														{															$amount = sprintf("%.2f",$row2['amount']);															$itemAmount="-".$amount;															$total += (-1*$amount);														}													?>													<tr>														<td style='text-align:center'><?=$i++?></td>														<td style='text-align:center'><?=$row2['head_type']?></td>														<td style='text-align:center'><?=get_row("name","tbl_account_heads","id=".$row2['head_name_id'])?></td>														<td style='text-align:center'><?=$row2['description']?></td>														<td style='text-align:center'><?=date('Y-m-d H:i',strtotime($row2['item_dt']));?></td>														<td style='text-align:right'><?=$itemAmount;?>&nbsp;</td>													</tr>													<?php 											    																											}												}												$total = sprintf("%.2f",$total);												?>												<tr>													<th colspan="5">Total</th>													<th style='text-align:right'><?=$total?>&nbsp;</th>												</tr>											</table>																								  </div>										</div>									  </div>									<?php									}								}								else								{									echo "<div style='text-align:center;color:#D32826;padding:10px;text-align:center;border:1px solid #ddd'>Data not found !</div>";								}								?>	  								</div>								<div style="padding:10px 1px 5px 1px">								<?php									  									$redirect="?module=accounts&page=voucher_summary&from_dt=$dt1&to_dt=$dt2&step";									echo paginationOfThePage($pagination,$redirect);								?> 								</div>																</div>							</div>						 </div>						                    </div>                </div>					            </div>        </div>    </body></html>